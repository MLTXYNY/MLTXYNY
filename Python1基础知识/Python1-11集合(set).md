# Python1-11集合(set)

## 1 集合基础

#### 1.1 定义

- 集合(set)是一个无序不重复元素的可变序列。
- 元素类型可以不同，不能重复。集合不能包含可变元素，例如列表。
- 集合是可以修改的，可以添加、删除元素。但无索引位置概念
- 基本功能是进行成员关系测试和删除重复元素。

#### 1.2 创建

直接通过一对大括号包裹元素创建集合对象

```python
#基本格式
集合名 = {元素一，元素二}   #重复元素自动去掉则为
```

```python
#例：
x={1,4,2,3,4} #则重复元素自动去掉，x为{1,4,2,3}
```

#### 1.3 创建空集合

创建一个空集合必须用set()而不是{}，因为{}是用来创建一个空pb字典。

```python
#例：
z=set()
```

#### 1.4 集合转换

使用set()函数将列表、range对象、字符串或其他类型的可迭代对象转换为集合，此时会删除其中的重复元素。

```python
y=set(‘idea’) # y为{‘i’,’d’,’e’,’a’}
```

## 2 集合常用操作

#### 2.1 定义

​		集合中的元素是无序可变不重复的，不支持索引、切片等操作。可通过循环遍历集合中的所有元素。

#### 2.2 添加元素

##### 2.2.1add(元素)

​		向集合中添加一个元素，元素为不可变类型，不能是列表、集合等可变类型，如果该元素已存在则没什么变化；

```python
x={1,2,3,4}
print(x.add(5))     # 添加后 x为{1,2,3,4,5}   
```

##### 2.2.2 update(可迭代对象)

将可迭代对象中的元素依次添加到集合中去，去除重复元素；

```python
x.update([1,6]) # {1,2,3,4,6}
```

##### 2.2.3 特殊：copy()

集合复制和列表复制一样，有深复制（deep copy）与浅复制（shallow copy）

```python
# 基本格式
新集合名称 =旧集合名称.copy()   #浅复制不会影响另一个集合的内容
```

```python
# 深复制方法
sets1=sets2
```

#### 2.3 删除元素

##### 2.3.1 pop()：

​		随机删除一个元素，并返回删除的元素；

##### 2.3.2 remove(元素)：

​		从集合中删除某个元素，如果该元素不存在，则抛出错误KeyError；

##### 2.3.3 discard(元素)：

​		从集合中删除某个元素，如果该元素不存在，则不会报错；

##### 2.3.4 clear()：

​		清空集合内容；

## 3 集合运算

#### 3.1 定义

​		Python中集合支持交集、并集、差集、对称差集等运算。

#### 3.2 交集

​		集合A和集合B的交集由既属于A又属于B的元素构成。

```python
#基本格式
#方法1：
集合A & 集合B
#方法2：
集合A.intersection(集合B)
```

```python
#例：
set1&set2
set1.intersection(set2)
```

#### 3.3 并集

​		集合A和集合B的并集由属于A或属于B的元素构成。

```python
#基本格式
#方法1： 
集合A | 集合B
#方法2：
集合A. union(集合B)
```

```python
#例：
set1|set2
set1.union(set2)
```

#### 3.4 差集

集合A和集合B的差集由属于A但不属于B的元素构成。

```python
#基本格式
#方法1：
集合A - 集合B
#方法2：
集合A. difference(集合B)
```

```python
#例：
set1-set2
set1.difference(set2)
```

##### 3.5 对称差集

#### 集合A和集合B的对称差集由A和B的差集或B和A的差集组成。

```python
#基本格式
#方法1：
集合A ^ 集合B
#方法2：
集合A.symmetric_difference(集合B)
```

```python
#例：
set1^set2
set1.symmetric_difference(set2)
```

#### 3.6 判断集合A是否为集合B的子集

```python
#基本格式
#方法1：
集合A.issubset(集合B)
#方法2：
集合A <= 集合B
```

#### 3.7 判断集合A是否为集合B的父集

```python
#基本格式
#方法1：
集合A.issuperset(集合B)
#方法2：
集合A >= 集合B
```

## 4 集合推导式

#### 4.1 定义

 		集合推导式写法类似于列表推导式，只是用一对大括号表示，而不是一对中括号。同时会去除结果中的重复元素。

###### 举例1

```python
a_set = {x*x for x in range(-5, 5)}
b_set = {x*2 for x in ["A", "B", "A", 2, 4, 2]}
c_set = {x*2 for x in ["A", "B", "A", 2, 4, 2] if str(x).isdigit()}
d_set = {x for x in [2, 4, 6, 8] if x in [1, 3, 6, 4]}  # 求交集
e_set = {x for x in [2, 4, 6, 8] if x not in [1, 3, 6, 4]}  # 求差集
f_set = {x + y for x in [2, 4, 6, 8] for y in [1, 3, 5]}
```

## 5 实训

#### 5.1 创建集合set1:('apple','pear' ,'watermelon' ,'peach')

```python
set1 = {'apple','pear','watermelon','peach'}
```

#### 5.2 创建集合set2:['pear','banana','orange' ,'peach','grape']

```python
set2 = {'pear','banana','orange','peach','grape'}
```

#### 5.3 使用type函数查看set1的数据类型

```python
type(set1)
```

#### 5.4 使用符号“|”求出两个集合的并集

```python
set1|set2  # 并集
```

#### 5.5 使用符号“&”求出两个集合的交集

```python
set1&set2  # 交集
```

#### 5.6 使用符号“-”求出两集合的差集setl-set2

```python
set1.difference(set2) # 差集
```

#### 5.7 使用difference 函数求出差集set2-set1

```python
set1.symmetric_difference(set2)
```

## 6 补充

#### 6.1 大数据与集合的应用

将列表的重复元素删除

```python
fru = ['1，2，3，4，5，5，2，4]
x = set(fru)    # 列表转换为集合
fru1 = list(x)   # 集合转换为列表
print("原来列表数据"，fru)   # 输出：原来列表数据['1，2，3，4，5，5，2，4]
print("原来列表数据"，fru1)  # 输出：原来列表数据['1，2，3，4，5]
```

#### 6.2 集合运算表

| python符号 |   说明   |
| :--------: | :------: |
|     &      |   交集   |
|     \|     |   并集   |
|     -      |   差集   |
|     ^      | 对称差集 |
|     ==     |   等于   |
|     !=     |  不等于  |
|     in     |  是成员  |
|   not in   | 不是成员 |

#### 6.3 冻结集合 frozenset

​		 set 是可变集合， frozenset 是不可变集合也可直译为冻结集合，这是一个新的类别（ class )，只要设定元素后，这个冻结集合就不能再更改了。如果将元组（ tuple ）想成不可变列表( imnmutable list )，冻结集合就是不可变集合（ immutable set )。
​        冻结集合的不可变特性优点是可以用它作字典的键( key )，也可以作为其他集合的元素。冻结集合的建立方式是使用 frozenset (）函数，冻结集合建立完成后，不可使用 add (）或 remove (）更改冻结集合的内容。但是可以执行 intersection ()、 union () 、diference () 、syrnnetric diference () 、copy () issubset ()、 issuperset ()、 isdisjoint (）等方法。

# 7 Python数据类型转换

| 函数                 | 描述                                                 | 举例                                          |
| -------------------- | ---------------------------------------------------- | --------------------------------------------- |
| int(X，[base])       | 将X转换为一个整数，base--进制数，默认十进制。        | X="12";y=int(X,16)<br />将X转换成十六进制整数 |
| float(X)             | 将X转换为一个浮点数                                  |                                               |
| complex(real,[imag]) | 创建一个复数                                         | X=complex(2,3)  #X为2+3j                      |
| str(X)               | 将X转换为字符串                                      | X=str(123)                                    |
| eval(str)            | 用来计算在字符串中的有效python表达式，并返回一个对象 | X=7<br />eval('3*x')   #21                    |
| tuple(s)             | 将序列s转换为一个元组                                | tuple([1,2,3])                                |
| list(s)              | 将序列s转换为一个列表                                | X=(1,2,3,1)<br />y=list(x)                    |
| ste(s)               | 转换为可变集合                                       |                                               |
| chr(x)               | 一个整数变一个字符                                   | chr(65)   #A                                  |
| ord(x)               | 一个字符变成整数值                                   | ord('a')   #97                                |
| hex(x)               | 整数变十六进制字符串                                 |                                               |
| otc(x)               | 整数变八进制字符串                                   |                                               |
| bin(x)               | 整数变二进制字符串                                   |                                               |

